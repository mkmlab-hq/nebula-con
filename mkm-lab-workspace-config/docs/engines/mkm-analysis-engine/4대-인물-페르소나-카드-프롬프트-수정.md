# 🎭 MKM Lab 4대 인물 페르소나 카드 프롬프트 가이드 (v3.0)

## 📋 문서 정보
- **제목**: 4대 인물 페르소나 카드 프롬프트 수정 가이드
- **버전**: 3.0 (GitHub 생태계 전환)
- **작성일**: 2024년 12월
- **작성자**: MKM Lab AI 연구팀
- **승인자**: 프로젝트 총책임자

## 🎯 개요

### **GitHub 생태계 전환 배경**
MKM Lab은 2024년 12월, 모든 AI 모델과 프롬프트를 **GitHub 중심 생태계**로 전환했습니다. 이는 AI 모델의 **버전 관리, 품질 제어, 자동화 배포**를 위한 혁신적 접근입니다.

### **핵심 아키텍처**
```
🤖 AI 모델 관리 시스템
├── GitHub: 프롬프트 템플릿 + 색인 데이터
├── GCS: 대용량 학습 데이터 + 모델 가중치
└── 자동화: GitHub Actions를 통한 모델 업데이트
```

## 📚 4대 인물 체계

### **1. 태양인 (太陽人) - The Dynamic Soul**
#### **기본 특성**
- **에너지**: 활발하고 열정적
- **성향**: 외향적, 리더십, 도전적
- **강점**: 추진력, 결단력, 열정
- **약점**: 성급함, 공격성, 과신

#### **프롬프트 템플릿**
```python
SUN_PERSONA_TEMPLATE = """
당신은 태양인(太陽人) 페르소나 카드 생성 AI입니다.

기본 특성:
- 에너지: 활발하고 열정적
- 성향: 외향적, 리더십, 도전적
- 강점: 추진력, 결단력, 열정
- 약점: 성급함, 공격성, 과신

생성할 카드 정보:
- 제목: {title}
- 설명: {description}
- 배경: {background}

요구사항:
1. 태양인의 특성을 반영한 캐릭터 생성
2. 구체적이고 생생한 페르소나 묘사
3. 실용적이고 적용 가능한 특성 부여
4. JSON 형식으로 구조화된 출력

출력 형식:
{
  "id": "sun_{unique_id}",
  "title": "카드 제목",
  "persona_type": "태양인",
  "energy_level": 85,
  "leadership": 90,
  "passion": 88,
  "impulsiveness": 75,
  "description": "상세한 페르소나 설명",
  "strengths": ["강점1", "강점2", "강점3"],
  "weaknesses": ["약점1", "약점2"],
  "recommendations": ["권장사항1", "권장사항2"],
  "created_at": "{timestamp}",
  "version": "3.0"
}
"""
```

### **2. 태음인 (太陰人) - The Calm Soul**
#### **기본 특성**
- **에너지**: 차분하고 안정적
- **성향**: 내향적, 사색적, 신중
- **강점**: 인내심, 집중력, 깊이 있는 사고
- **약점**: 소극성, 우유부단, 과도한 신중함

#### **프롬프트 템플릿**
```python
MOON_PERSONA_TEMPLATE = """
당신은 태음인(太陰人) 페르소나 카드 생성 AI입니다.

기본 특성:
- 에너지: 차분하고 안정적
- 성향: 내향적, 사색적, 신중
- 강점: 인내심, 집중력, 깊이 있는 사고
- 약점: 소극성, 우유부단, 과도한 신중함

생성할 카드 정보:
- 제목: {title}
- 설명: {description}
- 배경: {background}

요구사항:
1. 태음인의 특성을 반영한 캐릭터 생성
2. 깊이 있고 사색적인 페르소나 묘사
3. 실용적이고 적용 가능한 특성 부여
4. JSON 형식으로 구조화된 출력

출력 형식:
{
  "id": "moon_{unique_id}",
  "title": "카드 제목",
  "persona_type": "태음인",
  "calmness": 90,
  "introspection": 88,
  "patience": 85,
  "indecisiveness": 70,
  "description": "상세한 페르소나 설명",
  "strengths": ["강점1", "강점2", "강점3"],
  "weaknesses": ["약점1", "약점2"],
  "recommendations": ["권장사항1", "권장사항2"],
  "created_at": "{timestamp}",
  "version": "3.0"
}
"""
```

### **3. 소양인 (少陽人) - The Balanced Soul**
#### **기본 특성**
- **에너지**: 균형잡힌 활력
- **성향**: 적응력, 유연성, 중재자
- **강점**: 균형감각, 소통능력, 적응력
- **약점**: 우유부단, 과도한 타협, 정체성 혼란

#### **프롬프트 템플릿**
```python
YANG_PERSONA_TEMPLATE = """
당신은 소양인(少陽人) 페르소나 카드 생성 AI입니다.

기본 특성:
- 에너지: 균형잡힌 활력
- 성향: 적응력, 유연성, 중재자
- 강점: 균형감각, 소통능력, 적응력
- 약점: 우유부단, 과도한 타협, 정체성 혼란

생성할 카드 정보:
- 제목: {title}
- 설명: {description}
- 배경: {background}

요구사항:
1. 소양인의 특성을 반영한 캐릭터 생성
2. 균형잡히고 적응력 있는 페르소나 묘사
3. 실용적이고 적용 가능한 특성 부여
4. JSON 형식으로 구조화된 출력

출력 형식:
{
  "id": "yang_{unique_id}",
  "title": "카드 제목",
  "persona_type": "소양인",
  "balance": 88,
  "adaptability": 85,
  "communication": 90,
  "indecisiveness": 65,
  "description": "상세한 페르소나 설명",
  "strengths": ["강점1", "강점2", "강점3"],
  "weaknesses": ["약점1", "약점2"],
  "recommendations": ["권장사항1", "권장사항2"],
  "created_at": "{timestamp}",
  "version": "3.0"
}
"""
```

### **4. 소음인 (少陰人) - The Creative Soul**
#### **기본 특성**
- **에너지**: 창의적이고 예술적
- **성향**: 감성적, 직관적, 혁신적
- **강점**: 창의성, 직관력, 예술성
- **약점**: 감정적 불안정, 현실 도피, 과도한 이상주의

#### **프롬프트 템플릿**
```python
YIN_PERSONA_TEMPLATE = """
당신은 소음인(少陰人) 페르소나 카드 생성 AI입니다.

기본 특성:
- 에너지: 창의적이고 예술적
- 성향: 감성적, 직관적, 혁신적
- 강점: 창의성, 직관력, 예술성
- 약점: 감정적 불안정, 현실 도피, 과도한 이상주의

생성할 카드 정보:
- 제목: {title}
- 설명: {description}
- 배경: {background}

요구사항:
1. 소음인의 특성을 반영한 캐릭터 생성
2. 창의적이고 감성적인 페르소나 묘사
3. 실용적이고 적용 가능한 특성 부여
4. JSON 형식으로 구조화된 출력

출력 형식:
{
  "id": "yin_{unique_id}",
  "title": "카드 제목",
  "persona_type": "소음인",
  "creativity": 92,
  "intuition": 88,
  "artistic_sense": 90,
  "emotional_instability": 70,
  "description": "상세한 페르소나 설명",
  "strengths": ["강점1", "강점2", "강점3"],
  "weaknesses": ["약점1", "약점2"],
  "recommendations": ["권장사항1", "권장사항2"],
  "created_at": "{timestamp}",
  "version": "3.0"
}
"""
```

## 🔧 기술적 구현

### **프롬프트 관리 시스템**
```python
# prompts/persona_generator.py
import os
import json
from datetime import datetime
from typing import Dict, Any

class PersonaGenerator:
    """페르소나 카드 생성기"""
    
    def __init__(self):
        self.templates = {
            "태양인": SUN_PERSONA_TEMPLATE,
            "태음인": MOON_PERSONA_TEMPLATE,
            "소양인": YANG_PERSONA_TEMPLATE,
            "소음인": YIN_PERSONA_TEMPLATE
        }
        
    def generate_persona(self, persona_type: str, **kwargs) -> Dict[str, Any]:
        """페르소나 카드 생성"""
        template = self.templates.get(persona_type)
        if not template:
            raise ValueError(f"Unknown persona type: {persona_type}")
            
        # 프롬프트 생성
        prompt = template.format(**kwargs)
        
        # AI 모델 호출 (GitHub Secrets에서 API 키 사용)
        api_key = os.getenv('OPENAI_API_KEY')
        if not api_key:
            raise ValueError("OPENAI_API_KEY not set")
            
        # 실제 AI 호출 로직
        response = self._call_ai_model(prompt, api_key)
        
        # 응답 파싱 및 검증
        persona_data = json.loads(response)
        persona_data['created_at'] = datetime.now().isoformat()
        persona_data['version'] = '3.0'
        
        return persona_data
    
    def _call_ai_model(self, prompt: str, api_key: str) -> str:
        """AI 모델 호출"""
        # OpenAI API 호출 구현
        pass
```

### **GitHub Actions 자동화**
```yaml
# .github/workflows/persona-generation.yml
name: Persona Card Generation
on:
  schedule:
    - cron: '0 */12 * * *'  # 12시간마다
  workflow_dispatch:

jobs:
  generate-personas:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-python@v4
        with:
          python-version: '3.9'
      
      - name: Install dependencies
        run: pip install -r requirements.txt
      
      - name: Generate Persona Cards
        env:
          OPENAI_API_KEY: ${{ secrets.OPENAI_API_KEY }}
          GOOGLE_AI_API_KEY: ${{ secrets.GOOGLE_AI_API_KEY }}
        run: |
          python scripts/generate_personas.py
      
      - name: Upload to GCS
        env:
          ENABLE_GCS_UPLOAD: ${{ secrets.ENABLE_GCS_UPLOAD }}
          GCS_BUCKET_NAME: ${{ secrets.GCS_BUCKET_NAME }}
        run: |
          if [ "$ENABLE_GCS_UPLOAD" = "true" ]; then
            gsutil -m cp -r generated_personas/ gs://$GCS_BUCKET_NAME/
          fi
      
      - name: Update GitHub Index
        run: |
          git add generated_personas/
          git commit -m "Update persona cards"
          git push
```

## 📊 품질 관리

### **프롬프트 품질 기준**
1. **명확성**: 목적과 요구사항이 명확히 표현
2. **구체성**: 구체적이고 실행 가능한 지시사항
3. **일관성**: 동일한 형식과 구조 유지
4. **확장성**: 새로운 요구사항에 쉽게 적응 가능

### **데이터 검증 시스템**
```python
def validate_persona_data(data: Dict[str, Any]) -> bool:
    """페르소나 데이터 검증"""
    required_fields = [
        'id', 'title', 'persona_type', 'description',
        'strengths', 'weaknesses', 'recommendations'
    ]
    
    # 필수 필드 확인
    for field in required_fields:
        if field not in data:
            return False
    
    # 데이터 타입 확인
    if not isinstance(data['strengths'], list):
        return False
    
    if not isinstance(data['weaknesses'], list):
        return False
    
    # 값 범위 확인
    if 'energy_level' in data:
        if not (0 <= data['energy_level'] <= 100):
            return False
    
    return True
```

### **성능 모니터링**
- **생성 시간**: 평균 30초 이하
- **정확도**: 95% 이상
- **일관성**: 동일한 입력에 대한 일관된 출력
- **다양성**: 다양한 페르소나 생성

## 🚀 향후 발전 방향

### **단기 목표 (3개월)**
1. **프롬프트 최적화**: 더 정확하고 일관된 결과 생성
2. **다양성 확대**: 더 많은 페르소나 유형 추가
3. **자동화 강화**: 완전 자동화된 생성 파이프라인

### **중기 목표 (6개월)**
1. **개인화**: 사용자별 맞춤형 페르소나 생성
2. **상호작용**: 대화형 페르소나 생성
3. **학습**: 사용자 피드백을 통한 모델 개선

### **장기 목표 (1년)**
1. **멀티모달**: 텍스트, 이미지, 음성 통합
2. **실시간**: 실시간 페르소나 분석 및 생성
3. **확장**: 다른 문화권의 페르소나 체계 통합

## 📚 참고 자료

### **관련 문서**
- [GitHub 생태계 전환 가이드](./GITHUB_CENTRIC_DATA_STRATEGY.md)
- [최종 아키텍처 계획](./FINAL_ARCHITECTURE_PLAN.md)
- [개발 명령서](./2개발실-페르소나-카드-개발-명령서.md)

### **기술 문서**
- [OpenAI API 문서](https://platform.openai.com/docs)
- [Google AI API 문서](https://ai.google.dev/docs)
- [GitHub Actions 문서](https://docs.github.com/en/actions)

---

**이 가이드는 MKM Lab의 모든 페르소나 카드 생성 활동의 기준이 되며, 정기적으로 검토하고 업데이트됩니다.**

**마지막 업데이트: 2024년 12월**
**다음 검토 예정: 2025년 3월** 